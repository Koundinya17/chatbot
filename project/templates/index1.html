<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WhatsApp Chat with Voice</title>
<style>
    /* CSS styles */
</style>
</head>
<body>
<div class="chat-container">
    <div class="chat-header">
        WhatsApp Chat with Voice
    </div>
    <div class="chat-messages" id="chat-messages">
        <!-- Messages will be dynamically added here -->
    </div>
    <div class="voice-input">
        <button class="voice-button" id="voice-button">Speak</button>
        <p class="voice-info" id="voice-info">Click 'Speak' and say your message</p>
    </div>
    <textarea class="message-input" id="message-input" placeholder="Type a message..."></textarea>
    <button class="send-button" id="send-button">Send</button>
</div>

<script>
    // JavaScript code
    const chatMessages = document.getElementById('chat-messages');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');
    const voiceButton = document.getElementById('voice-button');
    const voiceInfo = document.getElementById('voice-info');

    // Speech recognition
    const recognition = new webkitSpeechRecognition() || SpeechRecognition;
    recognition.continuous = false;
    recognition.interimResults = false;
    recognition.lang = 'en-US';

    recognition.onstart = function() {
        voiceInfo.textContent = 'Listening...';
    };

    recognition.onresult = function(event) {
        const message = event.results[0][0].transcript;
        messageInput.value = message;
        voiceInfo.textContent = 'Speech recognized: ' + message;
        sendMessage(); // Automatically send the message after recognition
    };

    recognition.onerror = function(event) {
        voiceInfo.textContent = 'Error occurred: ' + event.error;
    };

    recognition.onend = function() {
        voiceInfo.textContent = 'Click "Speak" and say your message';
    };

    voiceButton.addEventListener('click', function() {
        recognition.start();
    });

    // Send message function
    function sendMessage() {
        const message = messageInput.value.trim();
        if (message !== '') {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', 'sent');
            messageElement.innerHTML = `<div class="message-body"><p>${message}</p><span class="message-time">12:34</span></div>`;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom
            messageInput.value = '';
        }
    }

    // Event listeners for sending message
    sendButton.addEventListener('click', sendMessage);
    messageInput.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            sendMessage();
        }
    });
</script>
</body>
</html>
